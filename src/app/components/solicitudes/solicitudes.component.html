<!-- üßç FORMULARIO CLIENTE -->
<div class="card">
  <div class="card-head">Registrar Cliente</div>
  <div class="card-body">
    <form (ngSubmit)="guardarCliente()" #formCliente="ngForm" novalidate>
      <div class="form-grid-2">
        <div>
          <label>RUC / DNI *</label>
          <input type="text" [(ngModel)]="cliente.rucDni" name="rucDni" required />
        </div>
        <div>
          <label>Nombre *</label>
          <input type="text" [(ngModel)]="cliente.nombre" name="nombre" required />
        </div>
        <div>
          <label>Email</label>
          <input type="email" [(ngModel)]="cliente.email" name="email" />
        </div>
        <div>
          <label>Tel√©fono</label>
          <input type="text" [(ngModel)]="cliente.telefono" name="telefono" />
        </div>
      </div>

      <div class="button-group">
        <button type="submit" class="btn-guardar">Guardar</button>
        <button type="button" class="btn-cancelar" (click)="cancelarCliente()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- üìã LISTA DE CLIENTES -->
<div class="card">
  <div class="card-head">Clientes Registrados</div>
  <div class="buscador">
    <input
      type="text"
      placeholder="Buscar por nombre o RUC/DNI..."
      [(ngModel)]="clienteBuscado"
      (input)="buscarCliente()"
    />
  </div>

  <div class="card-body">
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>RUC/DNI</th>
          <th>Email</th>
          <th>Tel√©fono</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of clientes | slice:(paginaCliente-1)*itemsCliente:(paginaCliente*itemsCliente)">
          <td>{{ c.nombre }}</td>
          <td>{{ c.rucDni }}</td>
          <td>{{ c.email }}</td>
          <td>{{ c.telefono }}</td>
          <td>
            <button class="btn-editar" (click)="editarCliente(c)">‚úèÔ∏è</button>
            <button class="btn-eliminar" (click)="eliminarCliente(c.id)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="paginacion" *ngIf="clientes.length > itemsCliente">
      <button [disabled]="paginaCliente === 1" (click)="cambiarPaginaCliente(-1)">‚¨ÖÔ∏è</button>
      <span>P√°gina {{ paginaCliente }} de {{ totalPaginasClientes }}</span>
      <button [disabled]="paginaCliente === totalPaginasClientes" (click)="cambiarPaginaCliente(1)">‚û°Ô∏è</button>
    </div>
  </div>
</div>

<!-- üöö FORMULARIO SOLICITUD -->
<div class="card">
  <div class="card-head">Registrar Solicitud</div>
  <div class="card-body">
    <form (ngSubmit)="guardarSolicitud()" #formSolicitud="ngForm" novalidate>
      <div class="form-grid-2">
        <div>
          <label>Cliente *</label>
          <select [(ngModel)]="solicitud.cliente" name="cliente" required>
            <option [ngValue]="null">Seleccione cliente</option>
            <option *ngFor="let c of clientes" [ngValue]="c">
              {{ c.nombre }} ({{ c.rucDni }})
            </option>
          </select>
        </div>

        <div>
          <label>Veh√≠culo *</label>
          <select [(ngModel)]="solicitud.vehiculo" name="vehiculo" required>
            <option [ngValue]="null">Seleccione veh√≠culo</option>
            <option *ngFor="let v of vehiculos" [ngValue]="v">
              {{ v.placa }} - {{ v.marca }} ({{ v.tipo }})
            </option>
          </select>
        </div>

        <div>
          <label>Destino *</label>
          <input type="text" [(ngModel)]="solicitud.destino" name="destino" required />
        </div>

        <div>
          <label>Precio del servicio (S/)*</label>
          <input type="number" [(ngModel)]="solicitud.precio" name="precio" min="0" required />
        </div>

        <div>
          <label>Fecha de salida *</label>
          <input type="date" [(ngModel)]="solicitud.fechaSalida" name="fechaSalida" required />
        </div>
      </div>

      <div class="button-group">
        <button type="submit" class="btn-guardar">Guardar</button>
        <button type="button" class="btn-cancelar" (click)="cancelarSolicitud()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<!-- üìã LISTADO DE SOLICITUDES -->
<div class="card">
  <div class="card-head">Solicitudes Registradas</div>
  <div class="card-body">
    <div class="buscador">
      <input
        type="text"
        placeholder="Buscar por cliente, destino o veh√≠culo..."
        [(ngModel)]="searchTerm"
        (input)="buscar()"
      />
    </div>

    <table>
      <thead>
        <tr>
          <th>Cliente</th>
          <th>RUC/DNI</th>
          <th>Veh√≠culo</th>
          <th>Destino</th>
          <th>Precio (S/)</th>
          <th>Fecha salida</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let s of solicitudes | slice:(paginaActual-1)*itemsPorPagina:(paginaActual*itemsPorPagina)">
          <td>{{ s.cliente?.nombre }}</td>
          <td>{{ s.cliente?.rucDni }}</td>
          <td>{{ s.vehiculo?.placa }} - {{ s.vehiculo?.marca }}</td>
          <td>{{ s.destino }}</td>
          <td>{{ s.precio | number:'1.2-2' }}</td>
          <td>{{ s.fechaSalida | date:'dd/MM/yyyy' }}</td>
          <td>
            <button class="btn-editar" (click)="editarSolicitud(s)">‚úèÔ∏è</button>
            <button class="btn-eliminar" (click)="eliminarSolicitud(s.id)">üóëÔ∏è</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div class="paginacion" *ngIf="solicitudes.length > itemsPorPagina">
      <button [disabled]="paginaActual === 1" (click)="cambiarPagina(-1)">‚¨ÖÔ∏è</button>
      <span>P√°gina {{ paginaActual }} de {{ totalPaginas }}</span>
      <button [disabled]="paginaActual === totalPaginas" (click)="cambiarPagina(1)">‚û°Ô∏è</button>
    </div>
  </div>
</div>
